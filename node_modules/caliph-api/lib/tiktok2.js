const axios=require("axios"),cheerio=require("cheerio");async function shortener(i){return i}module.exports=async function(i){return new Promise(((e,t)=>{axios.get("https://musicaldown.com/id",{headers:{"user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36"}}).then((t=>{const o=cheerio.load(t.data),d=o("#link_url").attr("name"),a=o("#submit-form > div").find("div:nth-child(1) > input[type=hidden]:nth-child(2)").attr("name"),r=o("#submit-form > div").find("div:nth-child(1) > input[type=hidden]:nth-child(2)").attr("value"),n=o("#submit-form > div").find("div:nth-child(1) > input[type=hidden]:nth-child(3)").attr("value");let l={[`${d}`]:i,[`${a}`]:r,verify:n};axios.request({url:"https://musicaldown.com/id/download",method:"post",data:new URLSearchParams(Object.entries(l)),headers:{"user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36",cookie:t.headers["set-cookie"]}}).then((i=>{const o=cheerio.load(i.data);axios.request({url:"https://musicaldown.com/id/mp3",method:"post",headers:{"user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36",cookie:t.headers["set-cookie"]}}).then((async i=>{const t=cheerio.load(i.data),d={creator:"Caliph",video_title:(o("body > div.welcome.section > div > div:nth-child(2) > div.col.s12.l8 > h2").text()||":No Text").split(":")[1].trim(),audio_title:(t("body > div.welcome.section > div > div:nth-child(2) > div.col.s12.l8 > h2").text()||":No Text").split(":")[1].trim(),video:await shortener(o("body > div.welcome.section > div > div:nth-child(2) > div.col.s12.l8 > a:nth-child(5)").attr("href")),audio_original:await shortener(t("body > div.welcome.section > div > div:nth-child(2) > div.col.s12.l4 > audio > source").attr("src")),nowm:await shortener(o("body > div.welcome.section > div > div:nth-child(2) > div.col.s12.l8 > a:nth-child(7)").attr("href")),video_original:await shortener(o("body > div.welcome.section > div > div:nth-child(2) > div.col.s12.l8 > a:nth-child(9)").attr("href")),audio:await shortener(t("body > div.welcome.section > div > div:nth-child(2) > div.col.s12.l8 > a:nth-child(7)").attr("href")),preview:await shortener(o("body > div.welcome.section > div > div:nth-child(2) > div.col.s12.l4 > img").attr("src"))};e(d)}))}))}))}))}.bind();